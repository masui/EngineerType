<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>乗り物コンピューティング</title>
</head>
<body>

トヨタのソフト開発
http://d.hatena.ne.jp/yomoyomo/20150604/toyota

<div style="width:500pt">

<h1>世界の不便を退治しよう(3) - 乗り物を快適にする技術</h2>

自動車には昔から沢山のセンサやコンピュータが使われてきています。

どんなに古い車でもスピードメータやガソリン残量計のようなセンサが登載されていますし、
ブレーキやエンジンなどを制御に1980年代からワンチップマイコンが使われてきました。

<p>
最近のベンツ車は
「<a href="http://www.mercedes-benz.co.jp/content/japan/mpc/mpc_japan_website/ja/home_mpc/passengercars/home/new_cars/models/a-class/w176/fascination/safety.html">アテンションアシスト</a>」
という機能を登載しており、
多数のセンサで以下のような情報を取得して居眠り運転のような危険な状況を検出しています。

<ul>
<li> 走行状況の検出(加速度など)
<li> 車線変更の検出
<li> 路面状況の検出
<li> ドライバー交代の検出
<li> ドライビングスタイル(走行速度など)
<li> ステアリング操作の検出
<li> 各種操作の検出(アクセルペダル、ウインカーなど)
<li> 走行条件の検出(時刻、運転時間など)
</ul>

またMINIはAR技術を使って
<a href="https://www.youtube.com/watch?v=QARt89_6Jrs">MINI Augmented Vision</a>
なんてのを提案しているし、

高度な認識技術/AR技術


最近の車は沢山のCPUやセンサのモジュール(ECU: Electronic Control Unit)を接続する
<a href="https://ja.wikipedia.org/wiki/Controller_Area_Network">CAN</a> (Controller Area Network)のような
<a href="https://vector.com/vj_ecu_jp.html#can">車載LAN</a>が使われています。

CANは1986年に仕様が公開され、1994年に国際規格となって普及している車載ネットワーク規格です。
一般的なコンピュータからCAN上を流れる情報にアクセスするための装置も販売されていますが、
信号の詳細は公開されておらず、一般ユーザが利用することはできません。

2線ツイストペアを利用するCANは計算機で広く使われてきたEthernetとは似て非なるものですが、
Ethernet準拠の
<a href="http://www.veedims.com/">VEEDIMS</a>
というネットワークが利用されている高級車もあるようです。




<!--
> http://monoist.atmarkit.co.jp/mn/articles/0805/09/news152_2.html
> 車載ネットワークいろいろ

> CSMA/CA（Carrier Sense Multiple Access with Collision Avoidance）

http://www.popularmechanics.com/cars/how-to/a7386/how-it-works-the-computer-inside-your-car/
Controller Area Network

トヨタの, CANをスマホに送る装置
http://www.nikkei.com/article/DGXNASFK03012_T00C12A2000000/

Touch BRAIN
CANをモニタする装置?

http://download.vector-japan.co.jp/portal/medien/cmc/beginners/For_Beginners_CAN.pdf
ANは車載ネットワーク用に開発されたシリアルバスシステムであり、
Robert Bosch社によって1986年に仕様が公開されて国際規格
(ISO 11898)となり、現在もっとも普及している車載ネットワークプロトコル
といわれています。

Ethernet-based system such as VEEDIMS
http://www.veedims.com/

http://www.aboutthatcar.com/ac-roadster-%E2%80%93-american-supercar/
> However, in addition to the supercar status, the AC Roadster will
> feature something that has the potential to benefit every car produced
> in the future. It’s called the Virtual Electrical Electronic Device
> Interface Management System or VEEDIMS.
> 
> ICONIC Motors said, “The VEEDIMS solution leverages the innovative
> performance of Ethernet and IP technology to deliver an automation
> system that allows application-specific solutions to be rapidly
> designed and deployed. VEEDIMS allows vehicle engineers to replace
> miles of analog wiring with a single-cable and on-board network that
> carries both electric power and real-time data throughout the
> vehicle.”

http://www.iconicmotors.com/
ICONIC Motors
ICONIC AC Roadster

http://next.rikunabi.com/tech/docs/ct_s03600.jsp?p=001148
> 快適さ、便利さにおいて、ますます進化する自動車だが、今の自動車は実は
> “走るコンピュータ”と化していることは一般の人にはあまり知られていない
> かもしれない。自動車には大量の半導体やセンサーが組み込まれ、数十から
> 100近い超小型コンピュータ（マイコン／ECU）が稼働しているのだ。４月にス
> タートしたトヨタ自動車トヨタ東京開発センターBR制御ソフトウェア開発室
> （BRW）主幹の保科健氏が言う。
> 
> 　ECUによるIT制御は、エンジン、ボデー、マルチメディア機器など多岐の領域
> にわたる。燃料消費効率を高め、車体の横滑りを防ぎ、カーブではライトが角
> 度を自動調整……。アクセルやブレーキ、トランスミッションやメーターでも
> ECUは活躍する。車内の装置が正常に作動するかどうかをチェックするスタビリ
> ティコントロールなど安全性能を確保するためにも使われる。しかも、ECUは単
> 体で動いているのではない。それぞれは複合され、組み合わせながら動くのが
> 今の車だというのだ。
-->

CAN上のデータを自由に解析することができれば
このような機能はユーザが実装することも可能かもしれませんが、

<p>
CANは自動車を安全に正しく動かすためのシステムであり、
運転者や同乗者のコミュニケーションを支援するものではありません。

CAN上を流れる各種のデータを読み出す
<a href="http://www.blitz.co.jp/touch-brain/">Touch-B.R.A.I.N</a>
のような装置が販売されていますし、
トヨタが
<a href="http://www.nikkei.com/article/DGXNASFK03012_T00C12A2000000/">CAN上のデータをスマホに送るシステム</a>
を提供していたりしますが、
まだまだ普通のユーザが利用できる状況にはなっていません。
アテンションアシストで利用されているセンサ情報も普通のユーザが利用することはできません。

<p>
自動車のセンサ情報を利用すると様々な便利なことがあるという話は昔からありました。
たとえば2001年には
タクシーなどのワイパー情報をインターネットで共有することによって
雨が降っている場所を知るといった
<a href="http://internet.watch.impress.co.jp/www/article/2001/1205/ipv6smt.htm">実験</a>が行なわれたり、
様々なビジネスチャンスが模索されていましたが、現在実用になっているものはほとんどありません。

CANのデータは使えないとしても、
安全性に影響の無いセンサやコミュニケーション手段が登載されていれば
様々な応用が考えられます。

<!---
> http://internet.watch.impress.co.jp/www/article/2001/1205/ipv6smt.htm
> > 　2001年の2月に横浜で実施されたITSのフィード実験についても触れ、ここで
> > はバスやタクシーにさまざまなセンサーをつけてそれぞれの情報を収集したと
> > いう。例えば、「それぞれの車につけたワイパーの動作状況と、その場所を収
> > 集すれば雨の降っている場所が詳細に知ることができる」と新たな使い方を提
> > 案し「この情報をタクシー会社に提供することにより、『雨による客待ちが多
> > い地域』として活用することができる」とビジネスチャンスの1つであると期待
> > した。
> > 
-->

<p>
現在沢山のコンピュータやセンサがインターネットに接続されていますが、
家電製品や自動車などはネット接続機能を持っているにもかかわらず統合的に利用されていません。
家電業界/自動車業界/コンピュータ業界/建築業界などはこれまで全く別のものであり、
独自にセンサやネットワークを整備してきました。

昔はそれで問題が無かったかもしれませんが、
IoT時代にはあらゆるセンサや機器を統合的に利用できて欲しいものだと思います。

<h2>乗り物サーバ</h2>

自動車や自転車のような乗り物をインターネットに接続するとき、
サーバとして実装するべきかクライアントとして実装するべきかを考える必要があるでしょう。

現在使われているパソコンやスマホなどのほとんどは
Webサーバに接続可能なクライアントとして利用されていますが、
固定的なものはサーバとして実装する方が便利かもしれません。
たとえば、外部から家にアクセスして状況をモニタしたりエアコンや錠を操作したい場合、
その家はサーバとして実装するのがよさそうです。

外部から自動車の状況を調べたり鍵を操作したい場合は自動車をサーバとして扱うのが良いかもしれませんが、
自動車から外部サービスにアクセスする場合はクライアントとなるのが良いかもしれません。
このように、
自動車や自転車のような移動するオブジェクト(?)は
サーバ的な存在になったりクライアント的な存在になったりすることがあるので、
柔軟な性質をもつことが必要だと思われます。



自動車の位置を知りたい場合も同様でしょう。


乗り物に登載されるコンピュータはサーバとして実装された方が便利かもしれません。

移動することがなく、

外部から自動車の鍵を開けたい場合はサーバとして扱うのが良いかもしれませんし、
自動車の位置を知りたい場合も同様でしょう。

自動車は固有のURLを持ちつつ、クライアントのように使うこともできるというのがよさそうです。

従来のWebではリクエストはクライアント(ブラウザ)からWebサーバに送るものでしたが、
Websocketを使うとサーバとクライアントはほぼ対等に通信できますから
こういう違いはあまり問題にならなくなってきてるといえるでしょう。

というかサーバ的性質とクライアント的性質の両方を持つ必要がありそう

Ustされるよりも、
定点観測カメラのようになっている方が良いから


マシンのセンサの値を知りたい場合は
マシンをサーバにしておく必要がありましたが、

増井の自転車が bicycle.masui.org のようなアドレスになっていればいい

人間が
<a href="http://dl.acm.org/citation.cfm?id=741493">Personal Server</a>
を持ち歩くと便利だという

Intelの[[UIPedia::Roy Want]]が昔[[http://gyazz.com/UIPedia/Roy+Want%3A+The+Personal+Server%3A+Changing+the+Way+We+Think+about+Ubiquitous+Computing Personal Server]]というのを提唱していた
サーバを持ち歩くと面白いという話だと思うが、[[自転車]]ぐらいモビリティがあると面白いことができないか?

クライアントのデータを読み取ることもできる
 サーバにする必要はないような
 いつも動いてる保証がない感じなのは困るか
 * サーバとして実装するかどうか

センサやカメラが走り回るようなもので
サーバが動くと面白いこと
 特定の環境でだけクライアントがつながる
  屋台みたいなもの?
 センサ情報をブロードキャスト
  日本一週中
  コンファレンス巡回中
  *** 目立たない監視カメラ
 jitensha.com/location で位置がわかる

自転車からUstする話をあまり聞かないのは何故だろう?

<h2>自動車に欲しい機能</h2>

自動車も長い歴史があるが不便なことは沢山ある

ガソリンが空かどうか
 多分、大昔の自動車にはセンサがついてなかったのだろう
 センサがついて表示されるのがあたりまえになっている

昔に比べればすごく良くなったが
  後が見えるとかね

音声通知は欲しいことも
  ナビ以外でも欲しい
  ガソリンが少ないとか

MINIは車体の向こう側の景色が見えるとかいう広告を出しているが

小さな問題
  隣と通信できない
    どこがどう渋滞してるかわからない
  バッテリが悪いのか発電器が悪いのかわからない
    自己診断してほしい
  カギを持ち歩かなければならない
  「運転しなければならない」
    寝てても目的地についてほしいものだ
  危険回避があまりできない

命にかかわるのだからセンサがばっちり動いて欲しいものだ

現在どこにいるか - 泥棒対策

インターネット常時接続を売りにしている自動車というのは聞いたことがないのは不思議

<h2>自転車に欲しい機能</h2>

普通の自転車にセンサはついていませんが、
マニア向けに様々なサイクルコンピュータが販売されています。
速度や距離を測定/記録する安価なものから、
ペダル回転数(ケイデンス)や心拍数を測定できるもの、
GPSを登載したものまで様々な種類のものがあります。
タイヤの回転を検出するセンサを

Giantの
<a href="http://giant.co.jp/giant15/acc_datail.php?p_id=A0000296">CONTINUUM SYNC</a>

<a href="http://k-tai.impress.co.jp/docs/column/keyword/20110322_434325.html">ANT+</a>

ANT+は

USBホスト機能のあるAndroid

USBホストケーブル（OTGケーブル）

BLEのも



盗難やイタズラの心配があるので
コンピュータや




一方、自転車も同じようなものである

電動自転車のバッテリを使えばいいハズ

USB端子がついた自転車の試作品を見て驚いたことがあるのですが、
今考えてみると、
USB端子を登載していないことの方が不思議に感じられます。
時代を先取りしすぎていたのかもしれません。

自転車
 サイクルコンピュータ
 目立たない中継機になる


自動車も自転車も様々なセンサが使えるようになっているのに、
CANやANT+のような独自規格で動いていて、
自由に接続して使えないのが困る。

標準的な記憶装置やネット接続でいろいろできるようになれば
IoT応用が広がるハズなのに


ネットとの連携はイマイチ


</div>
</body>
</html>

